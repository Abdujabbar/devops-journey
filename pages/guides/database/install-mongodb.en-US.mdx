import { Callout } from "nextra-theme-docs";

## Ubuntu 20.04 serverga MongoDB o'rnatish va sozlash

![mongodb](/images/tutorials/database/mongo.png)

[MongoDB](https://www.mongodb.com/) - bu MySQL va MariaDB kabi Relational Database Management System (RDBMS) ilovalariga muqobil bo'lgan NoSQL ma'lumotlar bazasi. Ushbu qo'llanma MongoDB bilan tanishtiradi va Ubuntu 20.04 da latest versiyani qanday o'rnatishni tushuntiradi.

### MongoDB nima?

MongoDB - bu document-oriented(hujjatga yo'naltirilgan) ma'lumotlar bazasi. U ma'lumotlarni an'anaviy relational ma'lumotlar bazasiga qaraganda ancha moslashuvchan tarzda saqlaydi. U obyektga yo'naltirilgan modellar bilan yaxshi mos keladi va tuzilmagan(unstructured) yoki yarim tizimli(semi-structured) ma'lumotlar uchun yaxshi tanlovdir. MongoDB SQL-ga asoslangan ma'lumotlar bazalariga nisbatan o'rganish va ulardan foydalanish oson deb hisoblanadi. U oson scalability va qo'shimcha zaxiralash uchun taqsimlangan ma'lumotlar bazasi(distributed database) sifatida yaratilgan.

MongoDB NoSQL ma'lumotlar bazasi hisoblanadi, chunki u ma'lumotlarni saqlash va olish uchun Structured Query Language (SQL) foydalanmaydi. Documentlarni o'zgartirish va document ma'lumotlarini olish uchun administratorlar odatda MongoDB Query API dan foydalanadilar. Ular, shuningdek, querylarni oddiy ifodalar yoki JavaScript funksiyalariga asoslashlari mumkin. Bundan tashqari, MongoDB yozuvni table(jadval) ichidagi row(qator) sifatida qo'shmaydi. Binary JSON (BSON) fayl formatidan foydalangan holda documentdagi ma'lumotlarni saqlaydi. BSON - JavaScript Object Notation (JSON) formatining o'zgarishi bo'lib, atribut-qiymat juftliklari ketma-ketligini ikkilik(binary) ma'lumotlarga kodlaydi. Ushbu format saqlash joyini qisqartiradi va o'qish qulayligi hisobiga samaradorlikni oshiradi.

MongoDB documentlari formati nisbatan tuzilmagan(unstructured), shuning uchun har bir document boshqacha bo'lishi mumkin. Yagona haqiqiy cheklov shundan iboratki, document har bir key-value pairini o'z ichiga olgan maydonlar ro'yxatidan iborat bo'lishi kerak. Document sxemasi oldindan belgilanishi shart emas va foydalanuvchilar istalgan vaqtda formatni sozlashlari mumkin. MongoDB bir nechta documentlarni to'plamga birlashtirishi mumkin. MongoDB relational ma'lumotlar bazasi bo'lmaganligi sababli, documentlar yoki collectionlar(to'plam) o'rtasida ko'zda tutilgan aloqalar(connection) mavjud emas.

Jismoniy shaxslar yoki kichik korxonalar uchun mo'ljallangan `MongoDB Community Edition` bepul foydalanish mumkin. Ilova Server Side Public License (SSPL) ostida ishlatilishi mumkin va manba kodi bepul mavjud. Biroq, SSPL standart open source litsenziyalardan farq qiladi va biroz cheklovchidir. Foydalanuvchilarga litsenziya atrofida biron bir dasturiy ta'minotni ishlab chiqishdan oldin uni yaxshilab tushunish tavsiya etiladi. MongoDB ko'pgina Linux distributivlari uchun Windows va macOS bilan birga mavjud.

MongoDB bilan yanada chuqurroq tanishish, shu jumladan MongoDB va SQL o'rtasidagi taqqoslash uchun [MongoDB nima va undan nima uchun foydalaniladi?](https://devops-journey.uz/guides/database/start-mongodb) qo'llanmasiga qarang.

### MongoDB o'rnatish

MongoDB o'rnatish jarayoni juda oddiy. Avval rasmiy MongoDB paketini qo'shing va keyin ilovani o'rnatish uchun `apt` dan foydalaning. MongoDB-ni o'rnatish uchun quyidagi amallarni bajaring.

<Callout type="info" emoji="">
**Eslatma:**
Standart Ubuntu repositoriyasi bilan ta'minlangan `mongodb` to'plami rasmiy paket emas va ko'pincha yangilanmaydi. Boshqa ilovalar bilan to'g'ri ishlamasligi mumkin. Ushbu bo'limdagi ko'rsatmalar rasmiy MongoDB paketini qanday o'rnatishni ko'rsatadi. Norasmiy `mongodb `to'plami o'rnatilganligini tekshirish uchun `which mongodb` buyrug'ini bajaring. Agar Ubuntu ilovaga yo'lni ko'rsatsa, uni `apt` yordamida o'chirib tashlang.
</Callout>

1. `gnupg` va `curl` utilitasini o'rnating.

```bash /gnupg/ /curl/
sudo apt-get install gnupg curl
```
2. Public MongoDB GPG imzo kalitini(signing key) import qiling. Kalit muvaffaqiyatli import qilinganligini tekshiring.

```bash //
curl -fsSL https://pgp.mongodb.com/server-7.0.asc | \
   sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg \
   --dearmor
```

3. Ubuntu paketlari ro'yxatiga rasmiy MongoDB repositoriyasi haqida ma'lumot qo'shing.

```bash
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

4. `apt` yordamida paketlar ro'yxatini yangilang.

```bash
sudo apt-get update
```
5. MongoDB-ning so'nggi(latest) versiyasini o'rnating.

```bash /mongodb-org/
sudo apt-get install -y mongodb-org
```

<Callout type="info" emoji="">
**Eslatma:**
MongoDB-ning ma'lum bir versiyasini o'rnatish uchun, o'rnatish uchun chiqarilganni haqiqiy versiya bilan almashtirib, quyidagi buyruqdan foydalaning.

```bash /7.0.3/
sudo apt-get install -y mongodb-org=7.0.3 mongodb-org-database=7.0.3 mongodb-org-server=7.0.3 mongodb-mongosh=7.0.3 mongodb-org-mongos=7.0.3 mongodb-org-tools=7.0.3
```
`7.0.3` versiya o'rniga o'zingizga kerakli versiyani tanlab o'rnatib olishingiz mumkin
</Callout>

6. **Ixyiyoriy** Joriy konfiguratsiya bilan `apt-get` buyrug'i har doim yangi versiya mavjud bo'lganda MongoDB ni yangilaydi. Avtomatik yangilanishlarning oldini olish uchun quyidagi buyruqlarni bajaring.

```bash
echo "mongodb-org hold" | sudo dpkg --set-selections
echo "mongodb-org-database hold" | sudo dpkg --set-selections
echo "mongodb-org-server hold" | sudo dpkg --set-selections
echo "mongodb-mongosh hold" | sudo dpkg --set-selections
echo "mongodb-org-mongos hold" | sudo dpkg --set-selections
echo "mongodb-org-tools hold" | sudo dpkg --set-selections
```

### MongoDB-ni ishga tushirish

MongoDB vazifasi odatda `systemctl` vositalari yordamida boshqariladi. MongoDB-ni ishga tushirish va yoqish uchun quyidagi amallarni bajaring.

1. `systemctl` demonini qayta yuklang.

```bash
sudo systemctl daemon-reload
```
2. `systemctl start` yordamida process ishga tushiring.

```bash /mongod/
sudo systemctl start mongod
```
3. MongoDB servisi holatini bilish uchun `systemctl status` dan foydalaning.

```bash
sudo systemctl status mongod
```

4. Ubuntu-ni tizimni yuklash vaqtida MongoDB-ni avtomatik ishga tushirishni sozlash uchun quyidagi buyruqni kiriting.

```bash
sudo systemctl enable mongod
```

```txt filename="Natija"
Created symlink /etc/systemd/system/multi-user.target.wants/mongod.service â†’ /lib/systemd/system/mongod.service.
```

5. Ixtiyoriy, agar kerak bo'lsa, quyidagi buyruqlar yordamida MongoDB-ni to'xtatib va qayta ishga tushiring.

```bash
sudo systemctl stop mongod
sudo systemctl restart mongod
```

6. MongoDB to'g'ri ishlayotganini tasdiqlash uchun shelga kirish uchun `mongosh`-ni kiriting. Autentifikatsiya hali yoqilmaganligi sababli parol talab qilinmaydi.

<Callout type="info" emoji="">
**Eslatma:**
Qo'shimcha parametrlarsiz ushbu buyruq local serverdagi default `27017` portida ishlaydigan MongoDB instancega ulanadi. Agar tarmoqqa kirish yoqilgan bo'lsa yoki MongoDB boshqa portga ko'chirilgan bo'lsa, buyruqqa `--host 127.0.0.1:27017` qo'shing.
</Callout>

```bash
mongosh
```

```txt filename="Natija"
Current Mongosh Log ID:	655782d3c03672d6c9f0e9aa
Connecting to:		mongodb://127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.0.2
Using MongoDB:		7.0.3
Using Mongosh:		2.0.2

For mongosh info see: https://docs.mongodb.com/mongodb-shell/
```
