import { Callout } from "nextra-theme-docs";

# Minikube

Minikube - bu local mashinangizda VM yaratadigan va faqat bitta nodeni o'z ichiga olgan oddiy clusterni o'rnatadigan yengil vaznli(lightweight) Kubernetes ilovasi. U Kubernetes bilan tajriba oʻtkazmoqchi boʻlgan yoki u bilan har kuni local kompyuterida ishlamoqchi boʻlgan dasturchilar uchun moʻljallangan. Minikube DNS, NodePorts, ConfigMaps va Secrets kabi Kubernetes xususiyatlarini qo'llab-quvvatlaydi, bu esa Kubernetesni local muhitda sinab ko'rish uchun mos keladi.

![k8s](/images/tutorials/k8s/minkube/1.png)

## 1. Minikubeni o'rnatish

`minikube` local Kubernetes bo'lib, Kubernetes uchun o'rganish va rivojlantirishni osonlashtirishga qaratilgan.

Sizga kerak bo'lgan yagona narsa Docker (yoki shunga o'xshash) konteyneri yoki Virtual Machine environment va Kubernetes bitta buyruq masofasida: `minikube start`
[Dockerni linux serverlarga o'rnatish](https://devops-journey.uz/guides/konteyner/docker-ornatish) uchun qo'llanmamizdan foydalashingiz mumkin.

<Callout type="info" emoji="">
##### Sizga kerak bo'ladi

* 2 yoki undan ortiq CPU
* 2 GB bo'sh xotira
* 20 GB bo'sh disk maydoni
* Internetga ulanish
Container yoki virtual machine manager, masalan: Docker, QEMU, Hyperkit, Hyper-V, KVM, Parallels, Podman, VirtualBox, yoki VMware Fusion/Workstation
</Callout>



### Linuxga o'rnatish

Binary downloaddan foydalanib, x86-64 Linux-ga eng so'nggi minikube barqaror(stable) versiyasini o'rnatish uchun quyidagi buyruqdan foydalaning.

```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube
```
Binary download yordamida ARM64 Linux-ga eng so'nggi minikube stable versiyasini o'rnatish uchun quyidagi buyruqdan foydalaning.
```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-arm64
sudo install minikube-linux-arm64 /usr/local/bin/minikube
```

### macOSga o'rnatish

##### Minikube `stable` versiyasini `x86-64` `macOS`-ga `binary download` yordamida o'rnatish uchun quyidagi buyruqdan foydalaning.

```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
sudo install minikube-darwin-amd64 /usr/local/bin/minikube
```

##### `ARM64` uchun `stable`versiyani `binary download` yordamida o'rnatish.

```bash
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-arm64
sudo install minikube-darwin-arm64 /usr/local/bin/minikube
```

##### `Homebrew` orqali o'rnatish

```bash
brew install minikube
```
Brew orqali o'rnatilgandan keyin qaysi minikube ishlamay qolsa, eski minikube linklarini olib tashlashingiz va yangi o'rnatilgan ikkilik faylni ulashingiz kerak bo'lishi mumkin:

```bash
brew unlink minikube
brew link minikube
```

### Windowsga o'rnatish

minikube `stabele` versiyasini `x86-64` Windows-ga .`exe` yuklab olish orqali o'rnatish uchun:

1. Eng [so'nggi versiya](https://storage.googleapis.com/minikube/releases/latest/minikube-installer.exe) uchun installerni yuklab oling va ishga tushiring.
Yoki PowerShell dan foydalansangiz, ushbu buyruqdan foydalaning:

```bash
New-Item -Path 'c:\' -Name 'minikube' -ItemType Directory -Force
Invoke-WebRequest -OutFile 'c:\minikube\minikube.exe' -Uri 'https://github.com/kubernetes/minikube/releases/latest/download/minikube-windows-amd64.exe' -UseBasicParsing
```
2. `minikube.exe` binary faylini PATH-ga qo'shing.
PowerShell-ni administrator sifatida ishga tushiring.

```powershell
$oldPath = [Environment]::GetEnvironmentVariable('Path', [EnvironmentVariableTarget]::Machine)
if ($oldPath.Split(';') -inotcontains 'C:\minikube'){
  [Environment]::SetEnvironmentVariable('Path', $('{0};C:\minikube' -f $oldPath), [EnvironmentVariableTarget]::Machine)
}
```

##### Windows Package Manager orqali o'rnatish

Agar [Windows Package Manager](https://docs.microsoft.com/en-us/windows/package-manager/) o'rnatilgan bo'lsa, minikube o'rnatish uchun quyidagi buyruqdan foydalaning:

```bash
winget install minikube
```
##### Chocolatey orqali o'rnatish
[Chocolatey Package Manager](https://chocolatey.org/) o'rnatilgan bo'lsa, quyidagi buyruqdan foydalaning:

```bash
choco install minikube
```

## 2. Clustergizni boshlang

Administrator ruxsatiga ega terminaldan (lekin root sifatida tizimga kirmagan) ishga tushiring:

```bash
minikube start
```
Agar minikube ishga tushmasa, mos keladigan konteyner yoki virtual mashina boshqaruvchisini sozlashda yordam olish uchun [drayverlar sahifasiga](https://minikube.sigs.k8s.io/docs/drivers/) qarang.


## 3. Clustergiz bilan o'zaro aloqada bo'ling

Agar sizda `kubectl` o'rnatilgan bo'lsa, endi siz undan yangi clusteringizga kirish uchun foydalanishingiz mumkin:

```bash
kubectl get po -A
```
Shu bilan bir qatorda, minikube kubectl ning tegishli versiyasini yuklab olishi mumkin va siz undan shunday foydalanishingiz mumkin:

```bash
minikube kubectl -- get po -A
```

Bundan tashqari, shell konfiguratsiyasiga quyidagilarni qo'shish orqali ishingizni osonlashtirishingiz mumkin:

```bash
alias kubectl="minikube kubectl --"
```
Dastlab, storage provayderi kabi ba'zi servicelar hali ishlayotgan holatda bo'lmasligi mumkin. Bu clusterni yaratishda odatiy holat bo'lib, bir zumda o'zini o'zi hal qiladi. Cluster holati(state) haqida qoʻshimcha maʼlumot olish uchun minikube yangi muhitga osongina moslashish imkonini beruvchi Kubernetes boshqaruv panelini birlashtiradi:

```bash
minikube dashboard
```

![k8s](/images/tutorials/k8s/minkube/2.jpg)